<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("./partials/head.ejs")%>
    <link rel="stylesheet" href="/css/residencies.css">
    <script defer src="/scripts/filters.js"></script>

    <title>Residencies</title>
  </head>
  <body>

    <%- include('./partials/header.ejs') %>
    <main>

      <section class="title-section">
        <div class = "top-container">
          <h1 class = "section-title">Residencies</h1>
          <a href="become-a-member" class = "become-member wip">become a member</a>
        </div>
        <div class="line"></div>
      </section> 

      <section class="filter-section">
        
        <div class = "filter-btn unselected">past</div>
        <div class = "filter-btn unselected">current</div>
        <div class = "filter-btn unselected">futur</div>
        <div class = "cross">X</div>

      </section>

      <section class="residencies-list">
        <% residencies.forEach((residency) => { %>


          <a class = "residency 

          <% if(residency.residency_start > new Date()){%>
            <%= "futur" %>
            <%}else if (residency.residency_end > new Date()){ %>
              <%= "current" %>
            <%}else{ %>
              <%= "past" %>
            <%} %>
          " href="/residencies/<%= residency._id%>">
            <div class="img-container" style="background-image: url('/assets/residencies_img/<%= residency.collective_name.replace(/[^\w\s]/g, "").replace(/\s+/g, "_").toLowerCase() %>/img0.png')">
              <div class="checkerboard"></div>
            </div>

            <div class="text-container">
              <div class="titles">
                <h2><%= residency.collective_name %></h2>
                <h3><%= residency.residency_name %></h3>
              </div>

              <div class="date-mini">
                <div class="first-line">
                  <div class = "start-day"><%= residency.residency_start.getDate(); %> </div>
                  <div class="arrow"></div>
                  <div class="end-day"><%= residency.residency_end.getDate() %></div> 
                </div>
                <div class = "month">
                  <%= (residency.residency_end.getMonth() + 1 < 10) ? "0" + (residency.residency_end.getMonth() + 1) : (residency.residency_end.getMonth() + 1) %>.<%= residency.residency_end.getFullYear() - 2000 %>&nbsp
                </div>
              </div>
            </div>
          </a>
        <% }) %>
        
      </section>
    </main>
    <footer></footer>
  </body>

</html>
